<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="#1497:Queen Attack 时间限制:10000ms   单点时限:1000ms   内存限制:256MB  描述 There are N queens in an infinite chessboard. We say two queens may attack each other if they are in the same vertical line, horizontal l">
<meta name="keywords">
<meta property="og:type" content="article">
<meta property="og:title" content="hihoCoder笔记(持续更新)">
<meta property="og:url" content="http://yoursite.com/2017/04/09/hihoCoder笔记-持续更新/index.html">
<meta property="og:site_name" content="V1ns0n Notebook">
<meta property="og:description" content="#1497:Queen Attack 时间限制:10000ms   单点时限:1000ms   内存限制:256MB  描述 There are N queens in an infinite chessboard. We say two queens may attack each other if they are in the same vertical line, horizontal l">
<meta property="og:image" content="http://7xl454.com1.z0.glb.clouddn.com/diligent-robots.png">
<meta property="og:updated_time" content="2017-04-24T11:49:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hihoCoder笔记(持续更新)">
<meta name="twitter:description" content="#1497:Queen Attack 时间限制:10000ms   单点时限:1000ms   内存限制:256MB  描述 There are N queens in an infinite chessboard. We say two queens may attack each other if they are in the same vertical line, horizontal l">
<meta name="twitter:image" content="http://7xl454.com1.z0.glb.clouddn.com/diligent-robots.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/04/09/hihoCoder笔记-持续更新/"/>





  <title> hihoCoder笔记(持续更新) | V1ns0n Notebook </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">V1ns0n Notebook</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/09/hihoCoder笔记-持续更新/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="V1ns0n">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="V1ns0n Notebook">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                hihoCoder笔记(持续更新)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-09T15:05:28+08:00">
                2017-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="1497-Queen-Attack"><a href="#1497-Queen-Attack" class="headerlink" title="#1497:Queen Attack"></a>#1497:Queen Attack</h1><ul>
<li>时间限制:10000ms  </li>
<li>单点时限:1000ms  </li>
<li>内存限制:256MB</li>
</ul>
<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><ul>
<li>There are N queens in an infinite chessboard. We say two queens may attack each other if they are in the same vertical line, horizontal line or diagonal line even if there are other queens sitting between them.</li>
<li>Now given the positions of the queens, find out how many pairs may attack each other?<a id="more"></a></li>
</ul>
<h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><ul>
<li>The first line contains an integer N.</li>
<li>Then N lines follow. Each line contains 2 integers Ri and Ci indicating there is a queen in the Ri-th row and Ci-th column.  </li>
<li>No two queens share the same position.  </li>
<li>For 80% of the data, 1 &lt;= N &lt;= 1000</li>
<li>For 100% of the data, 1 &lt;= N &lt;= 100000, 0 &lt;= Ri, Ci &lt;= 1000000000</li>
</ul>
<h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><ul>
<li>One integer, the number of pairs may attack each other.</li>
</ul>
<h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><blockquote>
<p>5<br>1 1<br>2 2<br>3 3<br>1 3<br>3 1</p>
</blockquote>
<h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><blockquote>
<p>10</p>
</blockquote>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>一开始采用最简单粗暴的算法，两个循环一个个的判断这个queen之间是不是会有冲突，但是写完之后提交就发现<em>TLE</em>超时了，一开始以为是编程语言的关系（因为用的是Python写的），但是后来看了别人的思路之后才发现并不是这个原因，算法思路才是关键。思路大概是计算有多少个queen在相同的行，有多少在相同的列，有多少在相同的主对角线，有多少在相同的次对角线，然后用排列组合公式 $C_n^2=\frac{n\times(n-1)}{2}$ 来计算配对数。下面是我用Python写的代码，<em>AC</em>。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2> <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">number = int(raw_input())</div><div class="line">queens = []</div><div class="line">count = <span class="number">0</span></div><div class="line"><span class="comment">#行列对角线的索引字典</span></div><div class="line">row = dict()</div><div class="line">col = dict()</div><div class="line">right = dict()</div><div class="line">left = dict()</div><div class="line"><span class="comment">#建立索引，统计每行、列、对角线上相冲突的queen的个数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_all</span><span class="params">(data_dict, data)</span>:</span></div><div class="line">    <span class="keyword">if</span> data_dict.get(data) != <span class="keyword">None</span>:</div><div class="line">        data_dict[data] += <span class="number">1</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        data_dict[data] =<span class="number">1</span></div><div class="line">        </div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(number):</div><div class="line">    x, y = [int(x) <span class="keyword">for</span> x <span class="keyword">in</span> raw_input().split()]</div><div class="line">    queens.append((x,y))</div><div class="line">    find_all(row, queens[i][<span class="number">0</span>])</div><div class="line">    find_all(col, queens[i][<span class="number">1</span>])</div><div class="line">    find_all(right, queens[i][<span class="number">0</span>]+queens[i][<span class="number">1</span>])</div><div class="line">    find_all(left, queens[i][<span class="number">1</span>]-queens[i][<span class="number">0</span>])</div><div class="line"></div><div class="line">row_num = sum([value*(value<span class="number">-1</span>)/<span class="number">2</span> <span class="keyword">for</span> value <span class="keyword">in</span> row.itervalues()])</div><div class="line">col_num = sum([value*(value<span class="number">-1</span>)/<span class="number">2</span> <span class="keyword">for</span> value <span class="keyword">in</span> col.itervalues()])</div><div class="line">right_num = sum([value*(value<span class="number">-1</span>)/<span class="number">2</span> <span class="keyword">for</span> value <span class="keyword">in</span> right.itervalues()])</div><div class="line">left_num = sum([value*(value<span class="number">-1</span>)/<span class="number">2</span> <span class="keyword">for</span> value <span class="keyword">in</span> left.itervalues()])</div><div class="line"><span class="comment">#因为题目中说了不会有位置重叠的queen，所以只需要把计数加起来就行了</span></div><div class="line">count = row_num + col_num + right_num + left_num</div><div class="line"><span class="keyword">print</span> count</div></pre></td></tr></table></figure>
<h1 id="1498-Diligent-Robots"><a href="#1498-Diligent-Robots" class="headerlink" title="#1498:Diligent Robots"></a>#1498:Diligent Robots</h1><ul>
<li>时间限制:10000ms  </li>
<li>单点时限:1000ms  </li>
<li>内存限制:256MB</li>
</ul>
<h2 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h2><ul>
<li>There are N jobs to be finished. It takes a robot 1 hour to finish one job.</li>
<li>At the beginning you have only one robot. Luckily a robot may build more robots identical to itself. It takes a robot Q hours to build another robot.  </li>
<li>So what is the minimum number of hours to finish N jobs?</li>
<li>Note two or more robots working on the same job or building the same robot won’t accelerate the progress.</li>
</ul>
<h2 id="输入-1"><a href="#输入-1" class="headerlink" title="输入"></a>输入</h2><ul>
<li>The first line contains 2 integers, N and Q.  </li>
<li>For 70% of the data, 1 &lt;= N &lt;= 1000000  </li>
<li>For 100% of the data, 1 &lt;= N &lt;= 1000000000000, 1 &lt;= Q &lt;= 1000</li>
</ul>
<h2 id="输出-1"><a href="#输出-1" class="headerlink" title="输出"></a>输出</h2><ul>
<li>The minimum number of hours.</li>
</ul>
<h3 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h3><blockquote>
<p>10 1</p>
</blockquote>
<h3 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h3><blockquote>
<p>5</p>
</blockquote>
<h2 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h2><p>这道题一开始想的很复杂，我不光考虑了（1）所有机器人都不复制，都干活的决策，和（2）所有机器人都复制，不干活的决策，还考虑了（3）有部分机器人干活，部分机器人复制的决策，担心第三种决策会使得总时间最少，如同下图中红线所示，在某个总任务数（如水平虚线所示），红线所代表的第三种情况用时最少（红线先于其他两条直线交于虚线）。但是我推导了一遍发现不可能出现这种情况，第三种情况的线应该是与其他两条黑线交于一点（如蓝线所示）。<br><img src="http://7xl454.com1.z0.glb.clouddn.com/diligent-robots.png" alt="diligent-robots"></p>
<h3 id="推导过程"><a href="#推导过程" class="headerlink" title="推导过程"></a>推导过程</h3><p>假设中认为为N，机器人复制需要q小时，在时间T1后，有机器人m个，第一种情况是不选择复制，让全部机器人干活，在时间T2之后的剩余时间为：$$h_1=\frac{N-qm}{m}$$<br>第二种情况为机器人全都复制，复制完成再干活，T2后剩余时间为：$$h_2=\frac{N}{2m}$$<br>第三种情况为x个机器人复制，(m-x)个机器人干活，剩余时间为：$$h_3=\frac{N-q(m-x)}{m+x}=\frac{N-qm+qx}{m+x}$$<br>我们可以看出来第一种情况就是第三种情况x=0的特例，第二种情况就是x=m的特例。我们可以把$h_3$看成x的函数，分析它的单调性，设(N-qm)=a,q=b,m=c,则$h_3$对x求导可得：$$\begin{equation}\begin{split}\frac{d}{dx}h_3&amp;=\frac{d}{dx}\big(\frac{a+bx}{c+x}\big)=\frac{b(c+x)-(a+bx)}{(c+x)^2}\\<br>&amp;=\frac{bc-a}{(c+x)^2}=\frac{2qm-N}{(m+x)^2}\end{split}\end{equation}$$<br>导数的符号取决于(2qm-N)的符号，而q,m,N都是定值，导数的符号与x无关，所以$h_3$是单调的，我们可以得知要么第一种情况用时少，要么第二种情况用时少，不可能会出现第三种情况(0&lt;x&lt;m)用时少，所以可以推测上图中蓝线与另外两条黑线交于同一点。除此之外，如果在一段时间内复制的次数一定，那一定是先复制完再干活是最快的，所以我们需要讨论的情况只限于我们复制多少次再干活。看到别人有用二分法的去搜索完成N个任务需要多久成功<em>AC</em>。下面是他人用C++完成的算法。</p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2> <figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="comment">//用来判断能否再limitTime里完成n个任务，复制所需要q个小时</span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ok</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> n, <span class="keyword">long</span> <span class="keyword">long</span> limitTime, <span class="keyword">long</span> <span class="keyword">long</span> q)</span> </span>&#123;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> count = (limitTime / q);</div><div class="line">    <span class="comment">//由于题中所说任务数最大是1000000000000个</span></div><div class="line">    <span class="comment">//所以如果能复制log2(1000000000000)~=40次，那么一定可以完成</span></div><div class="line">    <span class="comment">//原作者可能数错了0的个数，但是不影响结果</span></div><div class="line">    <span class="keyword">if</span>(count &gt; <span class="number">45</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> i=count; i&gt;=<span class="number">0</span>; i--) &#123;</div><div class="line">    		<span class="comment">//1LL代表long long类型的1，&lt;&lt;运算符为位左移，相当于乘2^i</span></div><div class="line">        <span class="keyword">long</span> <span class="keyword">long</span> machines = (<span class="number">1L</span>L &lt;&lt; i);</div><div class="line">        <span class="comment">//判断是否能完成</span></div><div class="line">        <span class="keyword">if</span>((limitTime - i * q) * machines &gt;= n) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> n, q;</div><div class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; q) &#123;</div><div class="line">        <span class="keyword">long</span> <span class="keyword">long</span> l = <span class="number">0</span>, h = n;</div><div class="line">        <span class="keyword">while</span>(l + <span class="number">1</span>&lt; h) &#123;</div><div class="line">        		<span class="comment">//二分法搜索</span></div><div class="line">            <span class="keyword">long</span> <span class="keyword">long</span> mid = ((l + h) &gt;&gt; <span class="number">1</span>);</div><div class="line">            <span class="keyword">if</span>(ok(n, mid, q)) &#123;</div><div class="line">                h = mid;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                l = mid;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; h &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="1499-A-Box-of-Coins"><a href="#1499-A-Box-of-Coins" class="headerlink" title="#1499:A Box of Coins"></a>#1499:A Box of Coins</h1><ul>
<li>时间限制:10000ms  </li>
<li>单点时限:1000ms  </li>
<li>内存限制:256MB</li>
</ul>
<h2 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h2><p>Little Hi has a box which consists of 2xN cells as illustrated below.  </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+----+----+----+----+----+----+</div><div class="line">| A1 | A2 | A3 | A4 | .. | AN |</div><div class="line">+----+----+----+----+----+----+</div><div class="line">| B1 | B2 | B3 | B4 | .. | BN |</div><div class="line">+----+----+----+----+----+----+</div></pre></td></tr></table></figure>
<p>There are some coins in each cell. For the first row the amounts of coins are A1, A2, … AN and for the second row the amounts are B1, B2, … BN.</p>
<p>Each second Little Hi can pick one coin from a cell and put it into an adjacent cell. (Two cells are adjacent if they share a common side. For example, A1 and A2 are adjacent; A1 and B1 are adjacent; A1 and B2 are not adjacent.)</p>
<p>Now Little Hi wants that each cell has equal number of coins by moving the coins. He wants to know the minimum number of seconds he needs to accomplish it.</p>
<h2 id="输入-2"><a href="#输入-2" class="headerlink" title="输入"></a>输入</h2><ul>
<li>The first line contains an integer, N. 2 &lt;= N &lt;= 100000  </li>
<li>Then follows N lines. Each line contains 2 integers Ai and Bi. (0 &lt;= Ai, Bi &lt;= 2000000000)  </li>
<li>It is guaranteed that the total amount of coins in the box is no more than 2000000000 and is a multiple of 2N.</li>
</ul>
<h2 id="输出-2"><a href="#输出-2" class="headerlink" title="输出"></a>输出</h2><p>The minimum number of seconds.</p>
<h3 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h3><blockquote>
<p>2<br>3 4<br>6 7</p>
</blockquote>
<h3 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h3><blockquote>
<p>4</p>
</blockquote>
<h2 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h2><p>一开始想的思路是，每次找到最多硬币的格子，然后往旁边的硬币数最少的格子放，这样不停的迭代，总能放完，样例可以通过，但是这个方案不可取，因为没法保证用时最短，而且会出现死循环的情况。参照别人的从一边开始，先判断上下两个是否有大于平均数的，如果都大于平均数，就分别放右边的格子放，使之等于平均数；如果一个大于一个小于，则先上下组内互匀，然后再分别跟右边交换达到平均数；如果都小于，那就分别从右边拿。用这个思路就可以<em>AC</em>了。</p>
<h2 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h2> <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></div><div class="line">    n = int(raw_input())</div><div class="line">    A=[]</div><div class="line">    B=[]</div><div class="line">    sum = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</div><div class="line">        str= map(int, raw_input().split())</div><div class="line">        a =str[<span class="number">0</span>]</div><div class="line">        b = str[<span class="number">1</span>]</div><div class="line">        sum += (a+b)</div><div class="line">        A.append(a)</div><div class="line">        B.append(b)</div><div class="line">    avg =sum/<span class="number">2</span>/n</div><div class="line">    count = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(A)):</div><div class="line">        <span class="keyword">if</span> max(A[i],B[i]) &gt;avg:</div><div class="line">            max_val = max(A[i],B[i])</div><div class="line">            min_val = min(A[i],B[i])</div><div class="line">            sub1 = max(A[i],B[i]) - avg</div><div class="line">            sub2 = avg - min(A[i],B[i])</div><div class="line">            <span class="keyword">if</span> sub2 &gt; <span class="number">0</span>:</div><div class="line">                <span class="keyword">if</span> sub1 &gt; sub2:</div><div class="line">                    count += abs(sub2)</div><div class="line">                    <span class="keyword">if</span> min_val == A[i]:</div><div class="line">                        A[i] = avg</div><div class="line">                        B[i] -= sub2</div><div class="line">                    <span class="keyword">else</span>:</div><div class="line">                        B[i] = avg</div><div class="line">                        A[i] -= sub2</div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    count += abs(sub1)</div><div class="line">                    <span class="keyword">if</span> max_val == A[i]:</div><div class="line">                        A[i] = avg</div><div class="line">                        B[i] += sub1</div><div class="line">                    <span class="keyword">else</span>:</div><div class="line">                        B[i] = avg</div><div class="line">                        A[i] += sub1</div><div class="line">        sub = avg -A[i]</div><div class="line">        <span class="keyword">if</span> sub !=<span class="number">0</span> :</div><div class="line">            A[i+<span class="number">1</span>] -= sub</div><div class="line">            count += abs(sub)</div><div class="line">        sub = avg - B[i]</div><div class="line">        <span class="keyword">if</span> sub != <span class="number">0</span>:</div><div class="line">            B[i + <span class="number">1</span>] -= sub</div><div class="line">            count += abs(sub)</div><div class="line">    <span class="keyword">return</span> count</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    <span class="keyword">print</span> int(func())</div></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/04/10/Hexo上Markdown使用的注意事项/" rel="next" title="Hexo上Markdown使用的注意事项">
                <i class="fa fa-chevron-left"></i> Hexo上Markdown使用的注意事项
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/04/09/hello-world/" rel="prev" title="Hello World">
                Hello World <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="V1ns0n" />
          <p class="site-author-name" itemprop="name">V1ns0n</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1497-Queen-Attack"><span class="nav-number">1.</span> <span class="nav-text">#1497:Queen Attack</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述"><span class="nav-number">1.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入"><span class="nav-number">1.2.</span> <span class="nav-text">输入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输出"><span class="nav-number">1.3.</span> <span class="nav-text">输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#样例输入"><span class="nav-number">1.3.1.</span> <span class="nav-text">样例输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样例输出"><span class="nav-number">1.3.2.</span> <span class="nav-text">样例输出</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路"><span class="nav-number">1.4.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码"><span class="nav-number">1.5.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1498-Diligent-Robots"><span class="nav-number">2.</span> <span class="nav-text">#1498:Diligent Robots</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-1"><span class="nav-number">2.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入-1"><span class="nav-number">2.2.</span> <span class="nav-text">输入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输出-1"><span class="nav-number">2.3.</span> <span class="nav-text">输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#样例输入-1"><span class="nav-number">2.3.1.</span> <span class="nav-text">样例输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样例输出-1"><span class="nav-number">2.3.2.</span> <span class="nav-text">样例输出</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-1"><span class="nav-number">2.4.</span> <span class="nav-text">思路</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#推导过程"><span class="nav-number">2.4.1.</span> <span class="nav-text">推导过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码-1"><span class="nav-number">2.5.</span> <span class="nav-text">代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1499-A-Box-of-Coins"><span class="nav-number">3.</span> <span class="nav-text">#1499:A Box of Coins</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#描述-2"><span class="nav-number">3.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入-2"><span class="nav-number">3.2.</span> <span class="nav-text">输入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输出-2"><span class="nav-number">3.3.</span> <span class="nav-text">输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#样例输入-2"><span class="nav-number">3.3.1.</span> <span class="nav-text">样例输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#样例输出-2"><span class="nav-number">3.3.2.</span> <span class="nav-text">样例输出</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#思路-2"><span class="nav-number">3.4.</span> <span class="nav-text">思路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码-2"><span class="nav-number">3.5.</span> <span class="nav-text">代码</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">V1ns0n</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

</body>
</html>
